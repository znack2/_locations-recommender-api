(this.webpackJsonpadvproto=this.webpackJsonpadvproto||[]).push([[0],{1:function(e,t,a){e.exports={body:"success_body__JFpEv",details:"success_details__1RS2V",contacts:"success_contacts__2LrJA",loading:"success_loading__2vo6o",wrap:"success_wrap__tPYj2",content:"success_content__39pOq","content-inner":"success_content-inner__9wjHC","detailed-rating":"success_detailed-rating__2hfY5","detailed-content":"success_detailed-content__2wF2-","content-top":"success_content-top__11MNv","content-bottom":"success_content-bottom__3NA4j",title:"success_title__1QqB8",workHours:"success_workHours__1ddm4",col:"success_col__1WHZY","right-col":"success_right-col__1mra3",rating:"success_rating__2LrU0",images:"success_images__2US9z","content-bottom-item":"success_content-bottom-item__3Hhq3",visited:"success_visited__3WlaT",cost:"success_cost__3Vszr",meta:"success_meta__2C6Up",refreshBtn:"success_refreshBtn__3KIAA","contacts-data-item":"success_contacts-data-item__3JT9S",whiteblock:"success_whiteblock__3ZrOg",map:"success_map__1MmM6","compare-card-list":"success_compare-card-list__6WcMC","compare-card":"success_compare-card__1LM0Y","compare-card--top":"success_compare-card--top__2B1RD","compare-card-photo--inner":"success_compare-card-photo--inner__2O_oA","compare-card-photo--image":"success_compare-card-photo--image__3vFGK",avatar:"success_avatar__3V63T","avatar-img-wrap":"success_avatar-img-wrap__2cnsc","avatar-img":"success_avatar-img__31ahM","recommendation-over":"success_recommendation-over__3_jbl",rate:"success_rate__1T77l","detailed-block":"success_detailed-block__3Os3G",cross:"success_cross__3UePT","rate-title":"success_rate-title__3ECtd","link-white":"success_link-white__oGQ7C",categoryBtn:"success_categoryBtn__yR3_K","link-pink":"success_link-pink__fYPGp",subsribeBtn:"success_subsribeBtn__c1Ek4",catMenu:"success_catMenu__3nMmD",catIcon:"success_catIcon__3KQtu",categoryBtnActive:"success_categoryBtnActive__1wNxD",burger:"success_burger__1GOWD","rate-faces":"success_rate-faces__CJ_Ry","rate-faces-sep":"success_rate-faces-sep__WlglF","rate-face-btn":"success_rate-face-btn__qIINf","contacts-data":"success_contacts-data__xqHYu",directions:"success_directions__2cvZA","detailed-list":"success_detailed-list__3jMhX","detailed-type":"success_detailed-type__3Cj0I"}},168:function(e,t,a){e.exports={btn:"circle_btn__2cPfV"}},170:function(e,t,a){e.exports=a.p+"static/media/auth_logo.5eb59e4e.png"},174:function(e,t,a){e.exports=a.p+"static/media/ic_round-remove-red-eye.958b0f80.svg"},175:function(e,t,a){e.exports=a.p+"static/media/mdi_brain.e75e4f8f.svg"},176:function(e,t,a){e.exports=a.p+"static/media/si-glyph_spoon-fork.e4f22442.svg"},177:function(e,t,a){e.exports=a.p+"static/media/foundation_sound.176e8de4.svg"},178:function(e,t,a){e.exports=a.p+"static/media/btn-burger.f7935473.svg"},179:function(e,t,a){e.exports=a.p+"static/media/arr_up.f6a20d4b.svg"},180:function(e,t,a){e.exports=a.p+"static/media/arr_down.5cc418b6.svg"},181:function(e,t,a){e.exports=a.p+"static/media/arr-pointer.a8a5992d.svg"},182:function(e,t,a){e.exports=a.p+"static/media/circle.7e6dbccc.svg"},183:function(e,t,a){e.exports=a.p+"static/media/default-user-avatar.ea071bf1.svg"},184:function(e,t,a){e.exports=a.p+"static/media/confirm.20a2cdf8.svg"},185:function(e,t,a){e.exports=a(422)},2:function(e,t,a){e.exports={header:"preferences_header__2ajfM","avatar-ctn":"preferences_avatar-ctn__3hp6h",logout:"preferences_logout__3Effx",remove:"preferences_remove__2JrbF",avatar:"preferences_avatar__3fMJv","avatar-img-wrap":"preferences_avatar-img-wrap__3Ka8K",user:"preferences_user__3Fcfv","avatar-img":"preferences_avatar-img__1U9j6",main:"preferences_main__28bts",footer:"preferences_footer__20Z_f",tag:"preferences_tag__1rPE0",tagActive:"preferences_tagActive__3-DVe",moreTags:"preferences_moreTags__2BkvE",more:"preferences_more__3FpUR",plus:"preferences_plus__gSERP",confirm:"preferences_confirm__R9UPZ",confirmBtn:"preferences_confirmBtn__eD_pm",moreInput:"preferences_moreInput__3fK0-",textarea:"preferences_textarea__2mFy0",moreSave:"preferences_moreSave__B8_JR",loadingWrap:"preferences_loadingWrap__IFsCQ",loadingItem:"preferences_loadingItem__1brYu"}},27:function(e,t,a){e.exports={intro:"intro_intro__w-df0",actions:"intro_actions__2YjvT",right:"intro_right__3mz3q",rightPointer:"intro_rightPointer__2797x",center:"intro_center__3-HkN",circle:"intro_circle__430Gn"}},421:function(e,t,a){},422:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(38),s=a.n(r),o=a(20),i=a(12),l=a(13),m=a(15),u=a(14),d=a(16),p=a(75),g=a(168),f=a.n(g),v=function(e){var t=e.children,a=e.onClick,n=e.disabled,r=e.fontSize,s=void 0===r?24:r,o=e.size,i=void 0===o?88:o,l=e.style;return c.a.createElement("button",{className:f.a.btn,style:Object(p.a)({fontSize:s,width:i,height:i},l),onClick:a,disabled:n},t)},h=a(169),_=a.n(h).a.create({baseURL:"".concat("http://localhost:3000/v1","/"),timeout:5e3}),E=a(45),b=a.n(E),A=a(170),w=a.n(A),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).openLoginWindow=function(){var e=window.width/2-250,t=window.height/2-250,n=window.open("about:blank","auth","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(500,", height=").concat(500,", top=").concat(t,", left=").concat(e)),c=setInterval((function(){try{var e=new URL(n.location);e.searchParams.get("code")&&(clearInterval(c),n.close(),a.onLogin(e.searchParams.get("code")))}catch(t){console.log(t)}}),1e3);n.location.href="https://www.instagram.com/oauth/authorize?client_id=476859443194257&redirect_uri=https://secure.stayandsmile.com/callback&scope=user_profile&response_type=code"},a.onLogin=function(e){a.setState({pending:!0}),_.post("login",{code:e}).then((function(e){a.setState({pending:!1}),e.data.accessToken&&a.props.setToken(e.data.accessToken)})).catch((function(){a.setState({pending:!1})}))},a.state={pending:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.onLogin()}},{key:"render",value:function(){var e=this.state.pending;return c.a.createElement("div",{className:b.a.body},c.a.createElement("div",{className:"content-fix"},c.a.createElement("div",{className:b.a.logo},c.a.createElement("img",{src:w.a,alt:"",className:""})),c.a.createElement("div",{className:b.a.footer},c.a.createElement(v,{onClick:this.onLogin(),disabled:e},"GO"),c.a.createElement("p",{className:b.a.text},"Sign up with Facebook to access your Instagram"))))}}]),t}(n.Component),y=a(100),N=a.n(y),S=a(171),O=a(69),C=a.n(O),j=a(70),R=a.n(j),x=(a(112),a(113),a(1)),T=a.n(x),I=a(71),B=a.n(I),U=a(72),L=a.n(U),P=a(73),F=a.n(P),V=a(74),z=a.n(V),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setRate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.setState({rate:e})},a.state={recommendation:null,pending:!0,rate:!1,detailedView:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.rate;if(this.props.subscribeSlide)return c.a.createElement("div",{className:T.a["recommendation-over"]},c.a.createElement("h2",{style:{fontSize:"1.85rem",marginBottom:"20px",fontWeight:300}},"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c."),c.a.createElement("p",{style:{fontSize:"1.12rem",marginBottom:"30px"}},"\u041f\u043e\u0434\u043f\u0438\u0448\u0438\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f."),c.a.createElement("p",{style:{fontSize:"10rem",marginBottom:0,marginTop:0,lineHeight:1}},"25\u0440"),c.a.createElement("p",{style:{fontSize:"1rem",marginBottom:"30px"}},"\u0432 \u043c\u0435\u0441\u044f\u0446"),c.a.createElement("button",{className:T.a.subsribeBtn},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"));var a=!!this.props.item.mainphoto&&!this.props.item.mainphoto.includes("undefined");return c.a.createElement("div",{className:T.a.wrap,style:{backgroundImage:a?"url(".concat(this.props.item.mainphoto,")"):" url(https://image.freepik.com/free-photo/abstract-blur-hotel-interior_1203-8529.jpg)"}},t&&c.a.createElement("div",{className:T.a.rate},c.a.createElement("div",{className:T.a["rate-title"]},"rate this point"),c.a.createElement("div",null,c.a.createElement("a",{href:"#",className:T.a["link-white"],onClick:function(t){t.preventDefault(),e.setRate(!1)}},"rate later")),c.a.createElement("div",{className:T.a["rate-faces"]},c.a.createElement("button",{className:T.a["rate-face-btn"],onClick:function(){e.setRate(!1)}},c.a.createElement("img",{src:F.a,alt:""})),c.a.createElement("div",{className:T.a["rate-faces-sep"]},"or"),c.a.createElement("button",{className:T.a["rate-face-btn"],onClick:function(){e.setRate(!1)}},c.a.createElement("img",{src:z.a,alt:""}))),c.a.createElement("div",{style:{marginTop:"auto",marginBottom:"20px"}},c.a.createElement("a",{href:"#",className:T.a["link-pink"],onClick:function(t){t.preventDefault(),_.post("recommendation/skip",{recommendationId:e.props.id}).then((function(t){var a=t.data;e.setState({recommendation:a.data,pending:!1})})),e.setRate(!1)}},"skip"))),c.a.createElement("div",{className:T.a.content},c.a.createElement("div",{className:T.a["content-inner"]},c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:T.a["content-top"]},c.a.createElement("div",{className:T.a.col},c.a.createElement("div",{className:T.a.title},this.props.item.name),c.a.createElement("div",{className:T.a.workHours},this.props.item.workhours)),c.a.createElement("div",{className:T.a["right-col"]},c.a.createElement("div",{className:T.a.rating},c.a.createElement("div",null,"user rating"),c.a.createElement("div",null,c.a.createElement("button",{className:"button-clear-defaults"},c.a.createElement("img",{src:B.a,alt:""}))," +  ",this.props.positiveReviews||"N/A"),c.a.createElement("div",null,c.a.createElement("button",{className:"button-clear-defaults"},c.a.createElement("img",{src:L.a,alt:""}))," - ",this.props.negativeReviews||"N/A")))),c.a.createElement("div",{className:T.a["content-bottom"]},c.a.createElement("div",{className:"".concat(T.a["content-bottom-item"]," ").concat(T.a.cost)},"average check: ",this.props.averageBillUSD,"$",c.a.createElement("div",{className:T.a.visited},c.a.createElement("div",{className:T.a["compare-card-photo--inner"]},this.props.lastFiveUsersSelectedThisLocation.map((function(e,t){return c.a.createElement("div",{className:T.a["compare-card-photo--image"],key:t},c.a.createElement("div",{className:T.a["avatar-img-wrap"]},c.a.createElement("img",{src:e,className:"".concat(T.a["avatar-img"])})))})))," ",c.a.createElement("div",{style:{marginLeft:"15px"}},"+",this.props.numberOfUsersSelectedThisLocation))),c.a.createElement("div",{className:T.a["content-bottom-item"]},c.a.createElement(v,{size:60,fontSize:"0.67rem",onClick:function(){e.props.setCurrentRecomendation(e.props)},style:{fontWeight:300}},"Go ",c.a.createElement("br",null),"here")))))))}}]),t}(n.Component),M=a(46),Y=Object(M.withScriptjs)(Object(M.withGoogleMap)((function(e){return c.a.createElement(M.GoogleMap,{defaultZoom:16,defaultCenter:{lat:e.lat,lng:e.lng}},c.a.createElement(M.Marker,{position:{lat:e.lat,lng:e.lng}}))}))),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).updateStep=function(e){e>=a.state.stepLimit||a.setState({step:e},(function(){0===a.state.step&&a.props.setCurrentRecomendation()}))},a.setRate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.setState({rate:e})},a.state={rate:!1,step:1,stepLimit:4},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.rate,r=t.step;return c.a.createElement("div",{className:T.a.content},c.a.createElement(R.a,{onSwipeLeft:function(){e.updateStep(e.state.step+1)},tolerance:100,onSwipeRight:function(){e.updateStep(e.state.step-1)}},c.a.createElement("div",{className:" ".concat(T.a["content-inner"]," ").concat(T.a["detailed-content"]),style:{padding:0}},a&&c.a.createElement("div",{className:T.a.rate},c.a.createElement("div",{className:T.a["rate-title"]},"rate this point"),c.a.createElement("div",null,c.a.createElement("a",{href:"#",className:T.a["link-white"],onClick:function(t){t.preventDefault(),e.setRate(!1)}},"rate later")),c.a.createElement("div",{className:T.a["rate-faces"]},c.a.createElement("button",{className:T.a["rate-face-btn"],onClick:function(){e.setRate(!1)}},c.a.createElement("img",{src:F.a,alt:""})),c.a.createElement("div",{className:T.a["rate-faces-sep"]},"or"),c.a.createElement("button",{className:T.a["rate-face-btn"],onClick:function(){e.setRate(!1)}},c.a.createElement("img",{src:z.a,alt:""}))),c.a.createElement("div",{style:{marginTop:"auto",marginBottom:"20px"}})),c.a.createElement("div",{className:T.a["detailed-type"]},"Type: ",this.props.item.type),c.a.createElement("div",{className:T.a["detailed-rating"]},c.a.createElement("div",{className:T.a.rating},c.a.createElement("div",null,"user rating"),c.a.createElement("div",null,c.a.createElement("button",{className:"button-clear-defaults",onClick:this.setRate},c.a.createElement("img",{src:B.a,alt:""}))," +  ",this.props.positiveReviews||"N/A"),c.a.createElement("div",null,c.a.createElement("button",{className:"button-clear-defaults",onClick:this.setRate},c.a.createElement("img",{src:L.a,alt:""}))," - ",this.props.negativeReviews||"N/A"))),c.a.createElement(C.a,{dots:!0,speed:500,slidesToShow:1,slidesToScroll:1,infinite:!1,vertical:!0,verticalSwiping:!0,arrows:!1},this.props.item.photo.map((function(e){return c.a.createElement(n.Fragment,{key:e},c.a.createElement("div",{className:T.a.wrap,style:{backgroundImage:"url(".concat(e,")")}}))})))),r>1&&c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:T.a["detailed-list"]},c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("div",{className:T.a.cross,onClick:function(){e.setState({step:1})}},"\xd7")),2===r&&c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:T.a["detailed-block"]},c.a.createElement("div",{style:{fontSize:"1.25rem"}},this.props.item.title),c.a.createElement("div",{style:{color:"#C432AC"}},this.props.item.address),c.a.createElement("div",{style:{color:"#7935CB",fontWeight:300}},this.props.latitude,", ",this.props.longitude)),c.a.createElement("div",{className:T.a["detailed-block"]},c.a.createElement("div",{style:{fontSize:"1.25rem"}},this.props.item.workhours),c.a.createElement("div",{style:{color:"#FEBD38"}},"average check: ",this.props.averageBillUSD,"$")),c.a.createElement("div",{className:T.a["detailed-block"]},c.a.createElement("div",{style:{marginBottom:"4px"}},c.a.createElement("a",{href:this.props.website,target:"_blank",style:{color:"#7935CB"},rel:"noopener nofollow"},this.props.item.website)),c.a.createElement("div",{style:{marginBottom:"4px"}},this.props.phoneNumber))),3===r&&c.a.createElement("div",null,c.a.createElement(Y,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB8weNak3605tIrBrKaNi3Tr1A9AGzVxsE",loadingElement:c.a.createElement("div",{style:{height:"100%"}}),containerElement:c.a.createElement("div",{style:{height:"400px"}}),mapElement:c.a.createElement("div",{style:{height:"100%"}}),lat:this.props.latitude,lng:this.props.longitude}))))))}}]),t}(n.Component),K=a(174),D=a.n(K),J=a(175),Q=a.n(J),G=a(176),q=a.n(G),X=a(177),Z=a.n(X),$=a(178),ee=a.n($),te=a(27),ae=a.n(te),ne=a(179),ce=a.n(ne),re=a(180),se=a.n(re),oe=a(181),ie=a.n(oe),le=a(182),me=a.n(le),ue=function(e){var t=e.setViewed;return c.a.createElement("div",{className:ae.a.intro,onClick:t},c.a.createElement("div",{className:ae.a.actions},c.a.createElement("img",{src:ce.a,alt:""}),c.a.createElement("div",{className:ae.a.text},"swipe screen up/down \u2028to get recommendations"),c.a.createElement("img",{src:se.a,alt:""})),c.a.createElement("div",{className:ae.a.center},"tap if \u2028\u201cim going\u201d",c.a.createElement("div",{className:ae.a.circle},c.a.createElement("img",{src:me.a,alt:""}))),c.a.createElement("div",{className:ae.a.right},"change category what do you want now",c.a.createElement("div",{className:ae.a.rightPointer},c.a.createElement("img",{src:ie.a,alt:""}))))},de=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getRecommendation=function(){var e=a.state,t=e.categoryId,n=e.coords;console.log("categoryId",t);var c={};t&&(c={recommendationId:t}),n&&(c=Object(p.a)({},c,{currentLocation:{lat:n.latitude,lan:n.longitude}})),a.setState({pending:!0}),_.get("recommendation",{params:c}).then((function(e){var t=e.data;a.setState({recommendationList:[].concat(Object(o.a)(t),[{subscribeSlide:!0}]),pending:!1})})).catch((function(){a.setState({pending:!1})}))},a.state={recommendationList:[],categoryId:null,currentRecommendation:null,categoriesVisible:!1,introViewed:!!localStorage.getItem("introViewed"),categories:[{id:null,text:"ALL"},{id:1,icon:Q.a},{id:2,icon:Z.a},{id:3,icon:q.a},{id:4,icon:D.a}],coords:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getRecommendation(),navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e.setState({coords:a},(function(){e.getRecommendation()}))}),(function(){}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.recommendationList,r=t.categories,s=t.introViewed,o=t.currentRecommendation;return c.a.createElement(n.Fragment,null,!s&&c.a.createElement(ue,{setViewed:function(){e.setState({introViewed:!0}),localStorage.setItem("introViewed","viewed")}}),o?c.a.createElement(H,Object.assign({},o,{setCurrentRecomendation:function(){e.setState({currentRecommendation:null})}})):c.a.createElement(R.a,{onSwipeRight:function(){e.props.onSetScreen()},tolerance:100},c.a.createElement(C.a,{dots:!0,speed:500,slidesToShow:1,slidesToScroll:1,infinite:!1,vertical:!0,verticalSwiping:!0,arrows:!1},a.map((function(t,a){return c.a.createElement(W,Object.assign({},t,{setCurrentRecomendation:function(t){e.setState({currentRecommendation:t})},key:"".concat(t,"-").concat(a)}))})))),this.state.categoriesVisible&&c.a.createElement("div",{className:T.a.catMenu},r.map((function(t,a){return c.a.createElement("div",{key:a,className:T.a.catIcon,onClick:function(){e.setState({categoryId:t.id,categoriesVisible:!1},(function(){e.getRecommendation()}))}},t.icon?c.a.createElement("img",{src:t.icon,alt:""}):t.text)}))),!o&&c.a.createElement(n.Fragment,null,c.a.createElement("button",{className:"".concat(T.a.categoryBtn,"  ").concat(this.state.categoriesVisible?"".concat(T.a.categoryBtnActive):""," "),onClick:function(){e.setState({categoriesVisible:!e.state.categoriesVisible})}},this.state.categoryId?c.a.createElement(n.Fragment,null,c.a.createElement("img",{src:this.state.categories.find((function(t){return t.id===e.state.categoryId})).icon,alt:""})):c.a.createElement("img",{src:ee.a,className:T.a.burger,alt:""}))))}}]),t}(n.Component),pe=a(2),ge=a.n(pe),fe=a(183),ve=a.n(fe),he=a(184),_e=a.n(he);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var Ae=c.a.createElement("path",{d:"M15 -0.000488281C6.69316 -0.000488281 -4.57764e-05 6.69272 -4.57764e-05 14.9995C-4.57764e-05 23.3063 6.69316 29.9995 15 29.9995C23.3067 29.9995 30 23.3063 30 14.9995C30 13.3859 29.7836 11.7769 29.2067 10.276L27.3317 12.1149C27.5616 13.0389 27.6923 13.9629 27.6923 14.9995C27.6923 22.0398 22.0402 27.6918 15 27.6918C7.95969 27.6918 2.30765 22.0398 2.30765 14.9995C2.30765 7.95925 7.95969 2.3072 15 2.3072C18.4615 2.3072 21.5715 3.68641 23.762 5.87692L25.3846 4.25432C22.7298 1.59957 19.0384 -0.000488281 15 -0.000488281ZM28.0168 4.93942L15 17.9562L10.0601 13.0163L8.4014 14.675L14.1706 20.4442L15 21.2375L15.8293 20.4442L29.6754 6.59807L28.0168 4.93942Z",fill:"white"}),we=function(e){var t=e.svgRef,a=e.title,n=be(e,["svgRef","title"]);return c.a.createElement("svg",Ee({width:30,height:30,viewBox:"0 0 30 30",fill:"none",ref:t},n),a?c.a.createElement("title",null,a):null,Ae)},ke=c.a.forwardRef((function(e,t){return c.a.createElement(we,Ee({svgRef:t},e))}));a.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ne(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var Se=c.a.createElement("path",{d:"m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"}),Oe=c.a.createElement("path",{d:"m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"}),Ce=c.a.createElement("path",{d:"m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"}),je=c.a.createElement("path",{d:"m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"}),Re=function(e){var t=e.svgRef,a=e.title,n=Ne(e,["svgRef","title"]);return c.a.createElement("svg",ye({height:"427pt",viewBox:"-40 0 427 427.00131",width:"427pt",ref:t},n),a?c.a.createElement("title",null,a):null,Se,Oe,Ce,je)},xe=c.a.forwardRef((function(e,t){return c.a.createElement(Re,ye({svgRef:t},e))})),Te=(a.p,function(e){var t=e.title,a=e.onClick,n=e.active;return c.a.createElement("div",{className:"".concat(ge.a.tag," ").concat(n?ge.a.tagActive:""),onClick:a},"# ",t)}),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setTags=function(){var e=a.state.tagsText.split(",").filter((function(e){return e.trim().length>0}));if(e.length){var t=[].concat(Object(o.a)(a.state.tags),Object(o.a)(e)),n=Object(o.a)(new Set(t));a.setState({addingTags:!1,tagsText:"",tags:n})}},a.handleRemoveList=function(e){var t=a.state.tagsToRemove,n=Object(o.a)(t);n=t.includes(e.trim())?n.filter((function(t){return t.trim()!==e.trim()})):[].concat(Object(o.a)(n),[e]),a.setState({tagsToRemove:n})},a.onConfirm=function(){var e=a.state.tags;if(e.length){var t=Object(o.a)(new Set(e)).filter((function(e){return!a.props.preferences.includes(e)}));t.length?Promise.all(t.map(a.postTag)).then((function(e){a.props.setPreferences(t),a.props.onSetScreen()})).catch((function(e){console.log(e,"err")})):a.props.onSetScreen()}},a.removePreference=function(){var e=a.state,t=e.tagsToRemove,n=e.tags,c=a.props.preferences;a.setState({pending:!0});var r=[];t.forEach((function(e){c.includes(e)&&r.push(e)})),r.length&&_.delete("user/preferences",{data:{preferences:r}}).then((function(){a.props.updatePreferences()}));var s=n.filter((function(e){return!t.includes(e)}));a.setState({tags:s,tagsToRemove:[],pending:!1})},a.state={pending:!1,addingTags:!1,tagsLoading:!e.preferences,tagsText:"",tags:e.preferences,tagsToRemove:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.preferences||setTimeout((function(){e.setState({tagsLoading:!1})}),3e3)}},{key:"postTag",value:function(e){return _.post("/user/preferences",{preference:e}).then((function(e){return{success:!0,data:e.data}})).catch((function(e){return{success:!1}}))}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.state,r=a.tags,s=a.tagsText,o=a.addingTags,i=a.pending,l=a.tagsLoading,m=a.tagsToRemove;return t?c.a.createElement(n.Fragment,null,c.a.createElement("header",{className:ge.a.header},c.a.createElement("div",{className:ge.a["avatar-ctn"]},c.a.createElement("div",{className:ge.a.avatar},c.a.createElement("div",{className:ge.a["avatar-img-wrap"],style:{backgroundImage:"url(".concat(t.profile_photo||ve.a,")")}}))),c.a.createElement("div",{className:ge.a.user},c.a.createElement("h2",{className:"title"},"Welcome ",t.username,"!"),c.a.createElement("p",{className:"text text--thin"},"Select interesting tags to you and tap OK"))),c.a.createElement("div",{className:"".concat(ge.a.main)},c.a.createElement("div",{className:"main-content content "},c.a.createElement("div",{className:"content-body"},c.a.createElement("div",{className:ge.a.logout},c.a.createElement("button",{className:"button-clear-defaults",onClick:function(){e.props.setToken(null),e.props.setUser(null)}},"logout")),!l&&c.a.createElement(n.Fragment,null,r.length?c.a.createElement("div",null,r.map((function(t,a){var n=m.includes(t);return c.a.createElement(Te,{title:t,onClick:function(){e.handleRemoveList(t)},active:n,key:"".concat(t,"-").concat(a)})})),c.a.createElement("button",{className:ge.a.more,disabled:i,onClick:function(){e.setState({addingTags:!o})}},c.a.createElement("span",{className:ge.a.plus},"+"))):c.a.createElement(n.Fragment,null,c.a.createElement("span",{className:"text"},"no tags yet"),c.a.createElement("button",{className:ge.a.more,disabled:i,onClick:function(){e.setState({addingTags:!o})}},c.a.createElement("span",{className:ge.a.plus},"+"))),o&&c.a.createElement("div",{className:ge.a.moreInput},c.a.createElement("textarea",{disabled:i,onChange:function(t){e.setState({tagsText:t.target.value})},className:"textarea ".concat(ge.a.textarea),value:s}),c.a.createElement("button",{disabled:i||!s.trim().length,className:ge.a.moreSave,onClick:this.setTags},c.a.createElement("img",{src:_e.a,alt:""})))))),c.a.createElement("footer",{className:ge.a.footer},l?c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:ge.a.loadingWrap},c.a.createElement("div",{className:"".concat(ge.a.loadingItem," loadingItem1")}),c.a.createElement("div",{className:"".concat(ge.a.loadingItem," loadingItem2")}),c.a.createElement("div",{className:"".concat(ge.a.loadingItem," loadingItem3")}))):c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:ge.a.moreTags},c.a.createElement("button",{disabled:!m.length||i,onClick:this.removePreference,className:ge.a.remove},c.a.createElement(xe,null))),c.a.createElement("div",{className:ge.a.confirm},c.a.createElement("button",{className:ge.a.confirmBtn,disabled:i||!r.length,onClick:this.onConfirm},c.a.createElement(ke,null))))))):null}}]),t}(n.Component),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).updatePreferences=function(){_.get("user/preferences").then((function(e){var t=e.data;t.length&&a.props.setPreferences(t)}))},a.state={pending:!0,screen:"list"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(S.a)(N.a.mark((function e(){var t=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("user").then((function(e){var a=e.data;t.props.setUser(a)})).catch((function(){t.props.setUser(null),localStorage.removeItem("introViewed"),localStorage.removeItem("Access-Token"),delete _.defaults.headers.common["Access-Token"]}));case 2:return e.next=4,_.get("user/preferences").then((function(e){var a=e.data;a.length&&t.props.setPreferences(a)}));case 4:this.setState({pending:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.pending,n=t.screen,r=this.props,s=r.preferences,o=r.user,i=r.setToken,l=r.setUser;return a?null:s.length&&"profile"!==n?c.a.createElement("div",null,c.a.createElement(de,{onSetScreen:function(){e.setState({screen:"profile"})}})):c.a.createElement(Ie,{preferences:s,setToken:i,setUser:l,onSetScreen:function(){e.setState({screen:"list"})},updatePreferences:this.updatePreferences,setPreferences:this.props.setPreferences,user:o})}}]),t}(n.Component),Ue=(a(421),c.a.createContext({token:null,setToken:function(){},user:null,setUser:function(){},preferences:[],setPreferences:function(){}})),Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setToken=function(e){e?(localStorage.setItem("Access-Token",e),_.defaults.headers.common["Access-Token"]=e):(localStorage.removeItem("introViewed"),localStorage.removeItem("Access-Token"),delete _.defaults.headers.common["Access-Token"]),a.setState({token:e,loading:!1})},a.setUser=function(e){a.setState({user:e})},a.setPreferences=function(e){a.setState({preferences:[].concat(Object(o.a)(a.state.preferences),Object(o.a)(e))})},a.state={user:null,loading:!0,preferences:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setToken(localStorage.getItem("Access-Token"))}},{key:"render",value:function(){var e=this.state,t=e.token,a=e.user,r=e.loading,s=e.preferences;return r?null:c.a.createElement(Ue.Provider,{value:{token:t,user:a,preferences:s,setToken:this.setToken,setUser:this.setUser,setPreferences:this.setPreferences}},c.a.createElement(n.Fragment,null,c.a.createElement(Pe,{token:t,user:a,preferences:s,setToken:this.setToken,setPreferences:this.setPreferences,setUser:this.setUser})))}}]),t}(n.Component),Pe=function(e){var t=e.token,a=e.setToken,r=e.user,s=e.preferences,o=e.setPreferences,i=e.setUser;return t?c.a.createElement(n.Fragment,null,c.a.createElement(Be,{user:r,preferences:s,setToken:a,setUser:i,setPreferences:o})):c.a.createElement(n.Fragment,null,c.a.createElement(k,{setToken:a}))},Fe=Le,Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ze(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(c.a.createElement(Fe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ve?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ze(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ze(t,e)}))}}()},45:function(e,t,a){e.exports={body:"auth_body__3LHh0",logo:"auth_logo__1rEHP",footer:"auth_footer__1rqe7",text:"auth_text__2OQVr"}},71:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAANCAYAAACdKY9CAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEgSURBVHgBlVJBUsJAEOzZRKs4GW8Il/ACc7E0N3yJ+AKKFxBfYHyBPEFeYC4WhR7QH+Si4cgJD1o7zG5CSHKgoA9bO7s9s9M9S6iAF56H39YALl3ag3/+AvELhct0y6GS/H4xBKtIdh6aUIjo6uehTOCPzhgaEfaCY7rORsSzdh9KveIQaH2rhDwsKqQ4XZ+D6alaVUg9aWRlQ4fGSoJ+IcfD+sQX0lm9qiOaOE9gCojnHcYRcMFIRbpfxJ9i46rGYDKuBdu2XWllKptch8aUwiyq8efdR1nzBKLEuORDOYvSf+YR3WSxHeJf605eiHd6dC+fw6w9ELeesQ+a7in8nij7UricGI+ttU0QJ+bOkG3YvOe3bgBX+9C2xaT6jww2HWVrGy9YWQsAAAAASUVORK5CYII="},72:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAANCAYAAACdKY9CAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEWSURBVHgBjVHLTcNAFJyxg8TR3EA+kHQQS0gJJ+ggJRAqwB2gVEDSAamAFnLhJyGxJZgDJDd84kT28ex1nCxKrMxp9+3MvnnziH+Q5+M2AnZhJddrxvNFtvnOmvgYd3Fg7yC89H6gzLCU65WwFMhbfKXFezQhtEOeLaZ0FsJ3lUVoRg5rkwAMbtdkybYSHSKQqQp0wIrM3rwDi1FN1TN7X0fq3Lh5OGgpsRIwkqeTFKFc6OCVbwzUcrbmoE15jb/38F/bU0vWeCWRiQ7XwS8T7TTx3igm0DhHG2yjQc/K1FryAIGp/RdYytTt4SUeq/qm0Yx2Zn+uKRWd+p+pl84Ocsn16sUSEQw1nVNnAR84/BkzyVe7wB8D6W2bzhAwbAAAAABJRU5ErkJggg=="},73:function(e,t,a){e.exports=a.p+"static/media/happy-fave.624ff369.svg"},74:function(e,t,a){e.exports=a.p+"static/media/sad-face.b6224192.svg"}},[[185,1,2]]]);
//# sourceMappingURL=main.8ccec9cc.chunk.js.map